# Order Messages - Create a message for an order

## Create a message for an order

**POST**
`https://{workspaceUrl}/api/order_messages/{order}`

## Request

Provide your bearer token in the Authorization header when making requests to protected resources.

Example: `Authorization: Bearer 123`

### Path Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| order | string or allOf | required | The order to create a message for. |

Example: `E4A269FC`

### Pagination

Links

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| first | string | required | First |
| last | string | required | Last |
| prev | string or null | required | Prev |
| next | string or null | required | Next |

Examples:
- first: `https://example.spp.co/api/{resource}?page=1`
- last: `https://example.spp.co/api/{resource}?page=3`
- prev: `null`
- next: `https://example.spp.co/api/{resource}?page=2`

### Headers

| Header | Type | Description |
|--------|------|-------------|
| X-Api-Version | string | API version identifier, in case of any issues with API please provide this identifier when contacting support |

Example: `2024-03-05`

### Body

`application/json`

Message request

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| message | string | required | Message |
| user_id | integer | | User ID |
| staff_only | boolean | | Staff only |
| attachments | array[string\<binary\>] | | Attachments |

Examples:
- message: `Hello world!`
- user_id: `1`
- staff_only: `false`

## Responses

- 201
- 400
- 401
- 404

### Message created.

#### Headers

| Header | Type | Required | Description |
|--------|------|----------|-------------|
| X-Api-Identifier | string | required | Unique identifier for the request, in case of any issues with API please provide this identifier when contacting support |
| X-Api-Version | string | required | API version, in case of any issues with API please provide this identifier when contacting support |

Examples:
- X-Api-Identifier: `efc995d2-bfdb-3bc9-80a3-e828bb9c83c2`
- X-Api-Version: `20231214`

#### Body

`application/json`

**responses / 201**

MessageResource

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | integer | required | Message ID |
| user_id | integer | required | User ID |
| created_at | string\<date-time\> | required | Date added |
| message | string | required | Message |
| staff_only | boolean | required | Staff only |
| files | array[string] | required | Files |
| order | Order or allOf | required | Order resource |
| ticket | Ticket | required | TicketResource |

Examples:
- id: `1`
- user_id: `1`
- created_at: `2021-09-01T00:00:00+00:00`
- message: `Message`
- staff_only: `false`

##### ticket (Ticket)

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | integer | required | Ticket ID |
| created_at | string\<date-time\> | required | Created at |
| updated_at | string\<date-time\> | required | Updated at |
| last_message_at | string\<date-time\> | required | Last message at |
| date_closed | string\<date-time\> | required | Date closed |
| subject | string | required | Subject |
| user_id | integer | required | User ID |
| form_data | object | required | Form data |
| tags | array[string] | required | Tags |
| note | string | required | Note |
| employees | array[object] | required | Employees |
| status | string | required | Ticket status |
| source | string | required | Ticket source |
| order_id | integer | required | Order ID |
| messages | array[Message] | | Messages |
| client | User | required | User resource |
| metadata | object | | Metadata |

Examples:
- id: `1`
- created_at: `2021-09-01T00:00:00+00:00`
- updated_at: `2021-09-01T00:00:00+00:00`
- last_message_at: `2021-09-01T00:00:00+00:00`
- date_closed: `2021-09-01T00:00:00+00:00`
- subject: `Ticket subject`
- user_id: `1`
- form_data: `{"field_1":"value_1","field_2":"value_2"}`
- note: `Ticket note`
- status: `Ticket status`
- source: `Ticket source`
- order_id: `1`

##### employees (array[object])

| Field | Type | Description |
|-------|------|-------------|
| id | integer | User ID |
| name_f | string | First name |
| name_l | string | Last name |
| group_id | integer | Group ID |
| role_id | integer | Role ID |

Examples:
- id: `1`
- name_f: `John`
- name_l: `Doe`
- group_id: `1`
- role_id: `1`

##### client (User)

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | integer | required | User ID |
| aff_id | integer | required | Affiliate ID |
| aff_link | string | required | Affiliate link |
| created_at | string\<date-time\> | required | Date added |
| name_f | string | required | First name |
| name_l | string | required | Last name |
| email | string | required | Email |
| company | string | required | Company |
| tax_id | string | required | Tax ID |
| phone | string | required | Phone |
| address | Address | required | Address |
| note | string | required | Note |
| balance | number | required | Balance |
| optin | string | required | Optin |
| stripe_id | string | required | Stripe ID |
| custom_fields | object | required | Custom fields |
| status | integer | required | Status |
| role_id | integer | required | Role ID |
| role | Role | required | Role |
| name | string | required | Name |
| spent | string\<string\> or null | required | Spent |
| employee_id | integer | required | Employee ID |
| managers | array[UserManager] | required | Managers |
| ga_cid | string | required | Google Analytics Client ID |
| team_owner_ids | array[integer] | required | Team owner IDs |
| team_member_ids | array[integer] | required | Team member IDs |

Examples:
- id: `1`
- aff_id: `1`
- aff_link: `https://example.spp.co/r/ABC123`
- created_at: `2021-09-01T00:00:00+00:00`
- name_f: `John`
- name_l: `Doe`
- email: `user@example.org`
- company: `Example Inc.`
- tax_id: `123456789`
- phone: `123456789`
- note: `Note`
- balance: `10.00`
- optin: `Yes`
- stripe_id: `stripe_id`
- status: `1`
- role_id: `1`
- name: `John Doe`
- spent: `10.00`
- employee_id: `2`
- ga_cid: `123456789.1234567890`

##### address (Address)

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| line_1 | string | required | Address line 1 |
| line_2 | string | required | Address line 2 |
| city | string | required | City |
| country | string | required | Country |
| state | string | required | State |
| postcode | string | required | Postcode |
| name_f | string | required | First name |
| name_l | string | required | Last name |
| tax_id | string | required | Tax ID |
| company_name | string | required | Company name |
| company_vat | string | required | Company VAT |

Examples:
- line_1: `123 Main St`
- line_2: `Suite 100`
- city: `New York`
- country: `US`
- state: `NY`
- postcode: `10001`
- name_f: `John`
- name_l: `Doe`
- tax_id: `123456789`
- company_name: `Acme Inc.`
- company_vat: `123456789`

##### role (Role)

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| dashboard_access | integer | required | Dashboard Access |
| affiliates | integer | required | Affiliates Permission |
| clients | integer | required | Clients Permission |
| coupons | integer | required | Coupons Permission |
| created_at | string\<date-time\> | required | Created at |
| forms | integer | required | Forms Permission |
| id | integer | required | Role ID Permission |
| invoice_access | integer | required | Invoice access Permission |
| invoice_management | integer | required | Invoice management Permission |
| messaging | integer | required | Messaging Permission |
| name | string | required | Role name |
| order_access | integer | required | Order access Permission |
| order_management | integer | required | Order management Permission |
| rank_tracking | integer | required | Rank tracking Permission |
| services | integer | required | Services Permission |
| team | boolean | required | Team Permission. Same as settings_team for backward compatibility. (deprecated) |
| settings | boolean | required | Settings Permission, this only indicates if the role has access to settings or not, for more granular permissions check other fields. Kept for backward compatibility. (deprecated) |
| ticket_access | integer | required | Ticket access Permission |
| ticket_management | integer | required | Ticket management Permission |
| settings_company | boolean | required | Settings Company Permission |
| settings_payments | boolean | required | Settings Payments Permission |
| settings_team | boolean | required | Settings Team Permission |
| settings_modules | boolean | required | Settings Modules Permission |
| settings_integrations | boolean | required | Settings Integrations Permission |
| settings_orders | boolean | required | Settings Orders Permission |
| settings_tickets | boolean | required | Settings Tickets Permission |
| settings_accounts | boolean | required | Settings Accounts Permission |
| settings_messages | boolean | required | Settings Messages Permission |
| settings_tags | boolean | required | Settings Tags Permission |
| settings_sidebar | boolean | required | Settings Sidebar Permission |
| settings_dashboard | boolean | required | Settings Dashboard Permission |
| settings_templates | boolean | required | Settings Templates Permission |
| settings_emails | boolean | required | Settings Emails Permission |
| settings_language | boolean | required | Settings Language Permission |
| settings_logs | boolean | required | Settings Logs Permission |
| updated_at | string\<date-time\> | required | Updated at |

Examples:
- dashboard_access: `3`
- affiliates: `3`
- clients: `3`
- coupons: `3`
- created_at: `2021-08-31T14:48:00+00:00`
- forms: `3`
- id: `1`
- invoice_access: `3`
- invoice_management: `3`
- messaging: `3`
- name: `Administrator`
- order_access: `3`
- order_management: `3`
- rank_tracking: `3`
- services: `3`
- team: `true`
- settings: `1`
- ticket_access: `3`
- ticket_management: `3`
- settings_company: `true`
- settings_payments: `true`
- settings_team: `true`
- settings_modules: `true`
- settings_integrations: `true`
- settings_orders: `true`
- settings_tickets: `true`
- settings_accounts: `true`
- settings_messages: `true`
- settings_tags: `true`
- settings_sidebar: `true`
- settings_dashboard: `true`
- settings_templates: `true`
- settings_emails: `true`
- settings_language: `true`
- settings_logs: `true`
- updated_at: `2021-08-31T14:48:00+00:00`

##### managers (array[UserManager])

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | integer | required | User ID |
| name | string | required | User name |
| name_f | string | required | User first name |
| name_l | string | required | User last name |
| email | string | required | User email |
| role_id | integer | required | User role ID |

Examples:
- id: `25`
- name: `John Doe`
- name_f: `John`
- name_l: `Doe`
- email: `user@example.org`
- role_id: `5`